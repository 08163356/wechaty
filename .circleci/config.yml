version: 2

jobs:
  build:
    machine: true
    parallelism: 1

    docker:
      - image: scholzj/circleci-centos-golang

    steps:
      - checkout
      # - setup_remote_docker:
      #     docker_layer_caching: true
      - run: curl --silent --location https://rpm.nodesource.com/setup_10.x > /tmp/node-install.sh
      - run: sudo bash /tmp/node-install.sh
      - run: sudo yum -y install nodejs
      - run: sudo yum install gcc-c++ make
      - run: npm install
      - run: npm test

workflows:
  version: 2
  testflow:
    jobs:
      - build
