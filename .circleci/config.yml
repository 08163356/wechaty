version: 2

jobs:
  build:
    machine: true
    parallelism: 1
    docker:
      - image: scholzj/circleci-centos-golang
    steps:
      - checkout
      # - setup_remote_docker:
      #     docker_layer_caching: true
      - run:
        - name: Test
        - command: |
          curl --silent --location https://rpm.nodesource.com/setup_10.x > /tmp/node-install.sh
          sudo bash /tmp/node-install.sh
          sudo yum -y install nodejs
          sudo yum install gcc-c++ make
          npm install
          npm test
